#!/bin/bash

echo " "

echo " ========================================================================================================================================== "
echo "building winnipeg..."
echo " ========================================================================================================================================== "

cd ..
. build.sh
cd programs
echo " ========================================================================================================================================== "

echo " "

for folder in `ls all-testers/M2`
do
	echo " ========================================================================================================================================== "
	echo "Entering folder: ${folder}"
	echo " ========================================================================================================================================== "

	cd "all-testers/M2/${folder}"
	for file in `ls`
	do
		# echo "${file}"
		echo "Testing ${file} on winnipeg"
		../../../../src/winnipeg typecheck < "${file}"
	done
	cd ..
	cd ..
	cd ..

	echo " ========================================================================================================================================== "
	echo " "
done

echo "cleaning up..."
cd ../src
make clean
cd ..
cd programs
echo " "
